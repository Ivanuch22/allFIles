{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const PaymentComponent=_ref=>{let{headerBoxPrice,orderedCarts,generalPrice}=_ref;const[text,setText]=useState(\"\");const history=useNavigate();const getDataFromMonoUser=orderedCarts=>{const dataAboutCartForMono=orderedCarts.map((cart,index)=>{return{name:cart.name,qty:cart.count,sum:cart.price*100,icoun:\"\".concat(process.env.PUBLIC_URL,\"/img/\").concat(cart.images[0]),unit:\"шт.\",barcode:\"string\",header:\"string\",footer:\"string\",tax:[],uktzed:\"string\",discounts:[{type:\"DISCOUNT\",mode:\"VALUE\",value:cart.oldPrice}]};});fetch(\"https://api.monobank.ua/api/merchant/invoice/create\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Token\":\"utR_bnF6LUzdc4pr3yFNFF2kKEPk75xeIlItZx9QfaxY\"},body:JSON.stringify({amount:generalPrice*100,redirectUrl:\"https://mister-gifter.com/\",merchantPaymInfo:{reference:\"84d0070ee4e44667b31371d8f8813947\",destination:\"Подарунок від MISTER GIFTER\",comment:\"Подарунок від MISTER GIFTER\",customerEmails:[\"ivan.kalunuch12@gmail.com\",\"ivan.kalunuch31@gmail.com\"],paymentType:\"debit\",basketOrder:dataAboutCartForMono}})}).then(response=>{return response.json();}).then(data=>{console.log(data);window.location.href=data.pageUrl;})//   \"basketOrder\":[\n//     {\n//       \"name\":\"xxxxxxxxxxxx\",\n//       \"qty\":1,\n//       \"sum\":29900,\n//       \"icon\":\"https://xxxxxxxx.xxxxx/img/1a16c182-09b4-4ae9-8063-bc5e4a4c23d3.png\",\n//       \"unit\":\"xxx.\"\n//     }\n//   ]\n.catch(response=>console.log(response));};return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",marginTop:\"100px\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u0440\\u0438\\u0432\\u0456\\u0442\"}),/*#__PURE__*/_jsx(\"p\",{children:\" \\u0442\\u0443\\u0442 \\u0442\\u0435\\u0441\\u0442\\u0443\\u044E monopay\"}),/*#__PURE__*/_jsx(\"p\",{children:\" \"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>getDataFromMonoUser(orderedCarts),children:\"Get Data\"})]});};export default PaymentComponent;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","PaymentComponent","_ref","headerBoxPrice","orderedCarts","generalPrice","text","setText","history","getDataFromMonoUser","dataAboutCartForMono","map","cart","index","name","qty","count","sum","price","icoun","concat","process","env","PUBLIC_URL","images","unit","barcode","header","footer","tax","uktzed","discounts","type","mode","value","oldPrice","fetch","method","headers","body","JSON","stringify","amount","redirectUrl","merchantPaymInfo","reference","destination","comment","customerEmails","paymentType","basketOrder","then","response","json","data","console","log","window","location","href","pageUrl","catch","style","textAlign","marginTop","children","onClick"],"sources":["/Users/ivan/Desktop/Mistery/mistergiften/src/pages/PayPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\ninterface PaymentRequest {\n  generalPrice: any;\n  orderedCarts: any[];\n  headerBoxPrice: any;\n}\n\nconst PaymentComponent: React.FC<PaymentRequest> = ({\n  headerBoxPrice,\n  orderedCarts,\n  generalPrice,\n}) => {\n  const [text, setText] = useState(\"\");\n  const history = useNavigate();\n\n  const getDataFromMonoUser = (orderedCarts: any) => {\n    const dataAboutCartForMono = orderedCarts.map(\n      (cart: any, index: number) => {\n        return {\n          name: cart.name,\n          qty: cart.count,\n          sum: cart.price * 100,\n          icoun: `${process.env.PUBLIC_URL}/img/${cart.images[0]}`,\n          unit: \"шт.\",\n          barcode: \"string\",\n          header: \"string\",\n          footer: \"string\",\n          tax: [],\n          uktzed: \"string\",\n          discounts: [\n            {\n              type: \"DISCOUNT\",\n              mode: \"VALUE\",\n              value: cart.oldPrice,\n            },\n          ],\n        };\n      }\n    );\n    fetch(\"https://api.monobank.ua/api/merchant/invoice/create\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-Token\": \"utR_bnF6LUzdc4pr3yFNFF2kKEPk75xeIlItZx9QfaxY\",\n      },\n      body: JSON.stringify({\n        amount: generalPrice * 100,\n        redirectUrl: \"https://mister-gifter.com/\",\n        merchantPaymInfo: {\n          reference: \"84d0070ee4e44667b31371d8f8813947\",\n          destination: \"Подарунок від MISTER GIFTER\",\n          comment: \"Подарунок від MISTER GIFTER\",\n          customerEmails: [\n            \"ivan.kalunuch12@gmail.com\",\n            \"ivan.kalunuch31@gmail.com\",\n          ],\n          paymentType: \"debit\",\n          basketOrder: dataAboutCartForMono,\n        },\n      }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        console.log(data);\n        window.location.href = data.pageUrl;\n      })\n\n      //   \"basketOrder\":[\n      //     {\n      //       \"name\":\"xxxxxxxxxxxx\",\n      //       \"qty\":1,\n      //       \"sum\":29900,\n      //       \"icon\":\"https://xxxxxxxx.xxxxx/img/1a16c182-09b4-4ae9-8063-bc5e4a4c23d3.png\",\n      //       \"unit\":\"xxx.\"\n      //     }\n      //   ]\n\n      .catch((response) => console.log(response));\n  };\n\n  return (\n    <div style={{ textAlign: \"center\", marginTop: \"100px\" }}>\n      <h1>Привіт</h1>\n      <p> тут тестую monopay</p>\n      <p> </p>\n      <button onClick={() => getDataFromMonoUser(orderedCarts)}>\n        Get Data\n      </button>\n    </div>\n  );\n};\n\nexport default PaymentComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}