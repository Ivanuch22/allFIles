{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import style from\"./autorization.module.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Authorization=_ref=>{let{token,setToken}=_ref;const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[currentURL,setUrl]=useState(\"\");useEffect(()=>{let url=window.location.pathname.split(\"/\").pop()||\"\";setUrl(url);},[]);const sendUserData=(email,password)=>{if(!(email.length>4)||!(password.length>4)){return;}const endpoint=currentURL===\"registration\"?\"registration\":\"login\";const url=\"http://localhost:5000/api/user/\".concat(endpoint);fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email,password})}).then(response=>{if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}return response.json();}).then(data=>{console.log(\"Success:\",data);setToken(data);setEmail(\"\");setPassword(\"\");}).catch(error=>{console.error(\"Error:\",error);});};const renderForm=()=>{const isRegistration=currentURL===\"registration\";return/*#__PURE__*/_jsxs(\"div\",{className:style.authorization,children:[/*#__PURE__*/_jsx(\"h2\",{className:style.authorization__title,children:isRegistration?\"Зареєструватись\":\"Авторизація\"}),/*#__PURE__*/_jsx(\"input\",{className:style.authorization__input,type:\"email\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0456\\u0442\\u044C \\u0432\\u0430\\u0448 email...\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{className:style.authorization__input,type:\"password\",value:password,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0456\\u0442\\u044C \\u0432\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C...\",onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsxs(\"p\",{className:style.authorization__text,children:[isRegistration?\"Є аккаунт?\":\"Немає аккаунта?\",\" \",/*#__PURE__*/_jsx(\"button\",{className:style.authorization__span,onClick:()=>{},children:isRegistration?\"Увійти\":\"Зареєструватись\"})]}),/*#__PURE__*/_jsx(\"button\",{className:style.authorization__button,onClick:()=>sendUserData(email,password),children:\"\\u0423\\u0432\\u0456\\u0439\\u0442\\u0438\"})]});};return renderForm();};export default Authorization;","map":{"version":3,"names":["React","useEffect","useState","style","jsx","_jsx","jsxs","_jsxs","Authorization","_ref","token","setToken","email","setEmail","password","setPassword","currentURL","setUrl","url","window","location","pathname","split","pop","sendUserData","length","endpoint","concat","fetch","method","headers","body","JSON","stringify","then","response","ok","Error","status","json","data","console","log","catch","error","renderForm","isRegistration","className","authorization","children","authorization__title","authorization__input","type","placeholder","value","onChange","e","target","authorization__text","authorization__span","onClick","authorization__button"],"sources":["/Users/ivan/Desktop/Mistery/mistergiften/src/pages/autorization/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport style from \"./autorization.module.scss\";\n\ninterface componentTypes {\n  token: string;\n  setToken: (token: string) => void;\n}\n\nconst Authorization: React.FC<componentTypes> = ({ token, setToken }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [currentURL, setUrl] = useState(\"\");\n\n  useEffect(() => {\n    let url = window.location.pathname.split(\"/\").pop() || \"\";\n    setUrl(url);\n  }, []);\n\n  const sendUserData = (email: string, password: string) => {\n    if (!(email.length > 4) || !(password.length > 4)) {\n      return;\n    }\n\n    const endpoint = currentURL === \"registration\" ? \"registration\" : \"login\";\n    const url = `http://localhost:5000/api/user/${endpoint}`;\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ email, password }),\n    })\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n        return response.json();\n      })\n      .then((data) => {\n        console.log(\"Success:\", data);\n        setToken(data);\n        setEmail(\"\");\n        setPassword(\"\");\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n  };\n\n  const renderForm = () => {\n    const isRegistration = currentURL === \"registration\";\n\n    return (\n      <div className={style.authorization}>\n        <h2 className={style.authorization__title}>\n          {isRegistration ? \"Зареєструватись\" : \"Авторизація\"}\n        </h2>\n        <input\n          className={style.authorization__input}\n          type=\"email\"\n          placeholder=\"Введіть ваш email...\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          className={style.authorization__input}\n          type=\"password\"\n          value={password}\n          placeholder=\"Введіть ваш пароль...\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <p className={style.authorization__text}>\n          {isRegistration ? \"Є аккаунт?\" : \"Немає аккаунта?\"}{\" \"}\n          <button className={style.authorization__span} onClick={() => {}}>\n            {isRegistration ? \"Увійти\" : \"Зареєструватись\"}\n          </button>\n        </p>\n        <button\n          className={style.authorization__button}\n          onClick={() => sendUserData(email, password)}\n        >\n          Увійти\n        </button>\n      </div>\n    );\n  };\n\n  return renderForm();\n};\n\nexport default Authorization;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}