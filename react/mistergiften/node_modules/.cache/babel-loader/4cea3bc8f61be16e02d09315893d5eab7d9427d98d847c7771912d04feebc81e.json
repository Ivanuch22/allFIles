{"ast":null,"code":"var _jsxFileName = \"/Users/ivan/Desktop/Mistery/mistergiften/src/components/basket/index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport DrawerCart from \"../drawerCart\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Basket = ({\n  removeAdd,\n  decrement,\n  increment,\n  isBasketOpen,\n  onLike,\n  setBoxsPriceBasket,\n  setOpenBasket,\n  price,\n  carts,\n  boxsPriceBasket\n}) => {\n  _s();\n  const [basketBox, setBasketBox] = useState([]);\n  const [inputMessenger, setInputMessenger] = useState(\"viber\");\n  const [inputPayment, setInputPayment] = useState(\"monopay\");\n  const [isValid, setIsValid] = useState(true);\n  const [listCityes, setListCityes] = useState([]);\n  const [novaDepartment, setNovaDepartment] = useState([]);\n  const [activeNovaDepartment, setActiveNovaDepartment] = useState({\n    CityDescription: \"\",\n    Description: \"\"\n  });\n  const [activeCity, setActiveCity] = useState({\n    Present: \"\",\n    MainDescription: \"\"\n  });\n  const [isShowCity, setShowCity] = useState(false);\n  const [isShowDepartment, setShowDepartment] = useState(true);\n  const [inputData, setInputData] = useState({\n    fullName: {\n      value: \"\",\n      isValid: true,\n      errorMessage: \"\"\n    },\n    phoneNumber: {\n      value: \"\",\n      isValid: true,\n      errorMessage: \"\"\n    },\n    city: {\n      value: \"\",\n      isValid: true,\n      errorMessage: \"\"\n    },\n    novaPoshtaBranch: {\n      value: \"\",\n      isValid: true,\n      errorMessage: \"\"\n    },\n    comment: {\n      value: \"\",\n      isValid: true,\n      errorMessage: \"\"\n    }\n  });\n  const testApiNovaPoshta = async value => {\n    const url = \"https://api.novaposhta.ua/v2.0/json/\";\n    const key = \"fac23a4d2d34c603535680b0e25fac94\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify({\n        apiKey: key,\n        modelName: \"Address\",\n        calledMethod: \"searchSettlements\",\n        methodProperties: {\n          CityName: value,\n          Limit: \"5\",\n          Page: \"1\"\n        }\n      })\n    });\n    const {\n      data,\n      success\n    } = await response.json();\n    if (success) {\n      const newData = data[0].Addresses.map(citi => ({\n        ...citi,\n        isActive: false\n      }));\n      setListCityes(newData);\n      setShowCity(true);\n      setActiveNovaDepartment({\n        CityDescription: \"\",\n        Description: \"\"\n      });\n    }\n  };\n  const Department = async value => {\n    console.log(activeCity.MainDescription);\n    const url = \"https://api.novaposhta.ua/v2.0/json/\";\n    const key = \"fac23a4d2d34c603535680b0e25fac94\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify({\n        apiKey: key,\n        modelName: \"Address\",\n        calledMethod: \"getWarehouses\",\n        methodProperties: {\n          CityName: activeCity.MainDescription,\n          Page: \"1\",\n          Limit: \"5\",\n          Language: \"UA\",\n          WarehouseId: value\n        }\n      })\n    });\n    const {\n      data,\n      success\n    } = await response.json();\n    if (success) {\n      const newData = data.map(Department => ({\n        ...Department,\n        isActive: false\n      }));\n      setNovaDepartment(newData);\n      setShowDepartment(true);\n    }\n  };\n  const onChangeInput = even => {\n    let {\n      name,\n      value\n    } = even.target;\n    let isValid = true;\n    let errorMessage = \"\";\n    switch (name) {\n      case \"fullName\":\n        value.length > 5 ? isValid = true : isValid = false;\n        errorMessage = isValid ? \"\" : \"Мінімальна довжина 5 букв\";\n        break;\n      case \"phoneNumber\":\n        value = handleInputChange(value);\n        value.length === 13 ? isValid = true : isValid = false;\n        errorMessage = isValid ? \"\" : \"Ведіть правильно номер телефону\";\n        break;\n      case \"city\":\n        value.length > 2 ? isValid = true : isValid = false;\n        testApiNovaPoshta(value);\n        errorMessage = isValid ? \"\" : \"Мінімальна довжина 3 букв\";\n        break;\n      case \"novaPoshtaBranch\":\n        Department(value);\n        value.length > 0 ? isValid = true : isValid = false;\n        errorMessage = isValid ? \"\" : \"Виберіть номер віділення\";\n        break;\n      default:\n        break;\n    }\n    setInputData(prevData => ({\n      ...prevData,\n      [name]: {\n        value,\n        isValid,\n        errorMessage\n      }\n    }));\n  };\n  const handleInputChange = value => {\n    // Виконати перевірки для формату та довжини\n    let formattedInput = value.trim();\n    if (formattedInput.startsWith(\"0\")) {\n      formattedInput = `+38${formattedInput}`;\n    } else if (formattedInput.startsWith(\"380\")) {\n      formattedInput = `+${formattedInput}`;\n    } else if (formattedInput.startsWith(\"+\")) {\n      // Нічого не змінюємо\n    } else {\n      // Якщо введений текст не починається з 0, 380 або \"+\", ви можете застосувати ваші власні логіки обробки\n      // Наприклад, додаткові перевірки або ігнорування неприпустимих символів.\n    }\n    return formattedInput;\n  };\n  useEffect(() => {\n    fetch(`${process.env.PUBLIC_URL}/data/basket.json`).then(response => response.json()).then(data => setBasketBox(data)).catch(() => console.log(\"basket not find\"));\n  }, []);\n  const sendMessageToTelegram = async data => {\n    const TOKEN = \"6619280299:AAGIL6f6uD5nOU1Sjw26zzqvyI0V_fZZKq0\";\n    const CHAT_ID = \"-1002007095666\";\n    const URL_API = `https://api.telegram.org/bot${TOKEN}`;\n    const sendText = () => {\n      const getCurrentDate = new Date().toISOString().split(\"T\")[0];\n      //preparing text for post to telegram\n      let message = `<b>Заявка з сайта! </b>\n      `;\n      message += `\nДата створення замовлення: <i>${getCurrentDate}</i> \nІмя замовника <i>${inputData.fullName.value}</i>\nНомер телефону <i>${inputData.phoneNumber.value}</i>\nАдреса на яку відправити:\n<i>Місто ${inputData.city.value},\nНомер віділення ${inputData.novaPoshtaBranch.value}</i>\nКоментар <i>${inputData.comment.value}</i>\n\n<b>Замовлення</b>\nЗагальна сума : <i>${price} грн</i>\n\n<b>Карточки</b>`;\n      data.forEach(element => {\n        message += `\n<b>${element.name} </b>:\n<b>Тип чашки </b> <i>${element.type.length > 0 ? element.type.filter(element => element.isActive)[0].name : \"Без типа\"}</i>\nЦіна за чашку:  <i>${element.price}</i> гривень\nКількість чашок: <b>${element.count}</b>\n`;\n      });\n      message += `\n<b>Додатковий бокс, ціна:</b> <i>\n${boxsPriceBasket > 0 ? boxsPriceBasket : \"Бокс не був вибраний\"}</i>\nСпосіб оплати ${inputPayment} \nСпосіб звязку ${inputMessenger}`;\n\n      //preparing sending data\n      const formData = new URLSearchParams();\n      formData.append(\"chat_id\", CHAT_ID);\n      formData.append(\"text\", message);\n      formData.append(\"parse_mode\", \"html\");\n\n      //sending data\n      fetch(`${URL_API}/sendMessage`, {\n        method: \"POST\",\n        body: formData\n      }).then(response => {\n        return response;\n      }).then(response => response.json()).then(data => {\n        console.log(\"Message sent:\", data);\n      }).catch(error => {\n        console.error(\"Error:\", error);\n      });\n    };\n  };\n  const sendMessageToBackEnd = orderedCarts => {\n    const getCurrentDate = new Date().toISOString().split(\"T\")[0];\n    let filterCarts = [];\n    filterCarts = orderedCarts.map((element, index) => {\n      const activeType = element.type.length > 0 ? element.type.filter(type => type.isActive) : [];\n      return {\n        price: element.price,\n        // Замініть на значення з форми або іншого джерела\n        quantity: element.count,\n        name: element.name,\n        // Замініть на значення з форми або іншого джерела\n        picture: element.images[0],\n        // Замініть на значення з форми або іншого джерела\n        properties: activeType.length > 0 ? [{\n          name: \"Тип чашки\",\n          value: activeType[0].name\n        }] : null\n      };\n    });\n    try {\n      const activeBoxBasket = () => {\n        return basketBox.filter(element => {\n          return element.price === boxsPriceBasket;\n        });\n      };\n      const actBox = activeBoxBasket()[0];\n      filterCarts.push({\n        price: actBox.price,\n        // Замініть на значення з форми або іншого джерела\n        quantity: 1,\n        name: actBox.name,\n        // Замініть на значення з форми або іншого джерела\n        picture: actBox.img,\n        // Замініть на значення з форми або іншого джерела\n        properties: []\n      });\n    } catch {\n      console.log(\"basket is not choose\");\n    }\n    const dataForBack = {\n      source_id: 2,\n      client_comment: inputData.comment,\n      buyer: {\n        full_name: `${inputData.fullName.value}`,\n        // Замініть на значення з форми або іншого джерела\n        // email: \"john.doe@example.com\", // Замініть на значення з форми або іншого джерела\n        phone: `${inputData.phoneNumber.value}` // Замініть на значення з форми або іншого джерела\n      },\n\n      shipping: {\n        shipping_address_city: `${inputData.phoneNumber.value}`,\n        // Замініть на значення з форми або іншого джерела\n        shipping_address_region: `${inputData.novaPoshtaBranch.value}` // Замініть на значення з форми або іншого джерела\n      },\n\n      products: filterCarts\n    };\n\n    // Ваш існуючий код для обробки даних та відправлення на сервер KeyCRM\n    const token = \"ZTg5MWY5NDE4YWRkYTBjZDIzODQ0Mjc4NzRmYmM2MWQxMGY0MmQzZg\";\n    const url = \"https://openapi.keycrm.app/v1/order\";\n    const fetchData = async () => {\n      try {\n        const response = await fetch(url, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n            \"Cache-Control\": \"no-cache\",\n            Pragma: \"no-cache\",\n            Authorization: `Bearer ${token}`\n          },\n          body: JSON.stringify(dataForCrm)\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n        const responses = await response.json();\n        orderId = await responses.id;\n        amount = await responses.grand_total;\n        console.log(responses);\n        console.log(responses.grand_total);\n        res.json({\n          success: true\n        });\n      } catch (error) {\n        console.error(\"Error:\", error.message);\n      }\n    };\n    fetchData();\n\n    // fetch(\"https://1f10-88-155-140-169.ngrok-free.app/send-to-keycrm\", {\n    //   method: \"POST\",\n    //   mode: \"cors\",\n    //   headers: {\n    //     \"Content-Type\": \"application/json\",\n    //     Accept: \"application/json\",\n    //     \"Cache-Control\": \"no-cache\",\n    //     Pragma: \"no-cache\",\n    //   },\n    //   body: JSON.stringify(dataForBack),\n    // })\n    //   .then((response) => {\n    //     if (!response.ok) {\n    //       throw new Error(`HTTP error! Status: ${response.status}`);\n    //     }\n    //     return response.json();\n    //   })\n    //   .then((data) => console.log(data))\n    //   .catch((error) => console.error(\"Error:\", error));\n  };\n\n  const onSubmitFunc = e => {\n    e.preventDefault();\n    const areAllInputsValid = Object.values(inputData).every(field => field.value.length > 0 && field.isValid);\n    const newArr = {};\n    for (const fieldName in inputData) {\n      const element = inputData[fieldName];\n      element.value.length == 0 && element.isValid ? element.isValid = false : element.isValid = true;\n      newArr[fieldName] = element;\n    }\n    setInputData(newArr);\n    setIsValid(areAllInputsValid);\n    if (areAllInputsValid) {\n      if (inputPayment === \"monopay\") {\n        getDataFromMonoUser(carts);\n      }\n      sendMessageToTelegram(carts);\n      sendMessageToBackEnd(carts);\n      return;\n    } else {\n      return;\n    }\n  };\n  const dataLenght = carts === null || carts === void 0 ? void 0 : carts.length;\n  const getDataFromMonoUser = orderedCarts => {\n    const dataAboutCartForMono = orderedCarts.map((cart, index) => {\n      return {\n        name: cart.name,\n        qty: cart.count,\n        sum: cart.price * 100,\n        icoun: `${process.env.PUBLIC_URL}/img/${cart.images[0]}`,\n        unit: \"шт.\",\n        barcode: \"string\",\n        header: \"string\",\n        footer: \"string\",\n        tax: [],\n        uktzed: \"string\",\n        discounts: [{\n          type: \"DISCOUNT\",\n          mode: \"VALUE\",\n          value: cart.oldPrice\n        }]\n      };\n    });\n    try {\n      const activeBoxBasket = () => {\n        return basketBox.filter(element => {\n          console.log(element.price, boxsPriceBasket);\n          return element.price === boxsPriceBasket;\n        });\n      };\n      const actBox = activeBoxBasket()[0];\n      dataAboutCartForMono.push({\n        name: actBox.name,\n        qty: 1,\n        sum: actBox.price * 100,\n        icoun: `${process.env.PUBLIC_URL}/img/${actBox.img}}`,\n        unit: \"шт.\",\n        barcode: \"string\",\n        header: \"string\",\n        footer: \"string\",\n        tax: [],\n        uktzed: \"string\"\n      });\n    } catch {\n      console.log(\"error\");\n    }\n    fetch(\"https://api.monobank.ua/api/merchant/invoice/create\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-Token\": \"utR_bnF6LUzdc4pr3yFNFF2kKEPk75xeIlItZx9QfaxY\"\n      },\n      body: JSON.stringify({\n        amount: price * 100,\n        redirectUrl: \"https://mister-gifter.com/\",\n        webHookUrl: \"https://1f10-88-155-140-169.ngrok-free.app/webhook\",\n        merchantPaymInfo: {\n          reference: \"84d0070ee4e44667b31371d8f8813947\",\n          destination: \"Подарунок від MISTER GIFTER\",\n          comment: \"Подарунок від MISTER GIFTER\",\n          customerEmails: [\"ivan.kalunuch12@gmail.com\", \"ivan.kalunuch31@gmail.com\"],\n          paymentType: \"debit\",\n          basketOrder: dataAboutCartForMono\n        }\n      })\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      console.log(data);\n      window.location.href = data.pageUrl;\n    }).catch(response => console.log(response));\n  };\n  const closeMenu = event => {\n    const clickedElement = event.target;\n    if (clickedElement.className === \"drawer drawer--active\") {\n      setOpenBasket ? setOpenBasket(false) : console.log(\"not foutn function\");\n    } else {\n      console.log(\"No\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: isBasketOpen ? \"drawer drawer--active\" : \"drawer\",\n    onClick: e => closeMenu(e),\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"drawer__wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"drawer__title\",\n        children: [\"\\u0412\\u0430\\u0448\\u0435 \\u0437\\u0430\\u043C\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u044F:\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"drawer__exit\",\n          onClick: () => setOpenBasket && setOpenBasket(!isBasketOpen)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 9\n      }, this), dataLenght ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer__carts-block\",\n          children: carts.map((cart, index) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(DrawerCart, {\n                setOpenBasket: setOpenBasket,\n                removeAdd: removeAdd,\n                increment: increment,\n                onLike: onLike,\n                decrement: decrement,\n                Cart: cart,\n                smallButton: true,\n                action: \"add\"\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 21\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer__price\",\n          children: [\"\\u0421\\u0443\\u043C\\u0430 \", price, \" \\u20B4 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          onClick: () => setOpenBasket && setOpenBasket(!isBasketOpen),\n          to: \"/Boxs\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"drawer__description\",\n            children: \"\\u0414\\u043E\\u0434\\u0430\\u0439 \\u0431\\u043E\\u043A\\u0441 \\u0434\\u043B\\u044F \\u0432\\u0430\\u0443 \\u0435\\u0444\\u0435\\u043A\\u0442\\u0443! \\u2728\\u2B07\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer__row\",\n          children: basketBox.map((element, index) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: `${element.name} ${index}`,\n                className: \"drawer__box-checkbox\",\n                type: \"radio\",\n                name: \"RADIOBOXS\"\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                onClick: () => setBoxsPriceBasket(element.price),\n                htmlFor: `${element.name} ${index}`,\n                className: \"drawer__box\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${process.env.PUBLIC_URL}/img/${element.img}`,\n                  className: \"drawer__box-img\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 601,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"drawer__box-title\",\n                  children: element.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"drawer__text\",\n          children: \"\\u041F\\u0440\\u0456\\u0437\\u0432\\u0438\\u0449\\u0435 \\u0442\\u0430 \\u0406\\u043C\\u044F:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"drawer__input\",\n          name: \"fullName\",\n          value: inputData.fullName.value,\n          onChange: onChangeInput,\n          style: {\n            borderColor: inputData.fullName.isValid ? \"#444ad3\" : \"red\"\n          },\n          type: \"text\",\n          placeholder: \"\\u041F\\u0440\\u0456\\u0437\\u0432\\u0438\\u0449\\u0435 \\u0406\\u043C\\u044F \\u041F\\u043E-\\u0431\\u0430\\u0442\\u044C\\u043A\\u043E\\u0432\\u0456\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 13\n        }, this), inputData.fullName.errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"red\"\n          },\n          children: inputData.fullName.errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"drawer__text\",\n          children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            borderColor: inputData.phoneNumber.isValid ? \"#444ad3\" : \"red\"\n          },\n          className: \"drawer__input\",\n          type: \"text\",\n          name: \"phoneNumber\",\n          value: inputData.phoneNumber.value,\n          maxLength: 13,\n          onChange: onChangeInput,\n          placeholder: \"+38 (___) ___-__-__\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 13\n        }, this), inputData.phoneNumber.errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"red\"\n          },\n          children: inputData.phoneNumber.errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"drawer__text\",\n          children: \"\\u041C\\u0456\\u0441\\u0442\\u043E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"city\",\n          className: \"drawer__input\",\n          type: \"text\",\n          value: inputData.city.value,\n          onChange: onChangeInput,\n          placeholder: \"\\u043C. \\u041A\\u0438\\u0457\\u0432\",\n          style: {\n            borderColor: inputData.city.isValid ? \"#444ad3\" : \"red\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 13\n        }, this), inputData.city.errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"red\"\n          },\n          children: inputData.city.errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: isShowCity ? \"showed showedActive\" : \"showed\",\n          children: listCityes.length > 0 ? listCityes.map((city, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: e => {\n              let newItem = {\n                ...city,\n                isActive: true\n              };\n              let newArr = {\n                ...inputData,\n                city: {\n                  ...city,\n                  isValid: true,\n                  value: newItem.Present\n                },\n                novaPoshtaBranch: {\n                  isValid: false,\n                  value: \"\",\n                  errorMessage: \"Ведіть номер віділення\"\n                }\n              };\n              setShowCity(false);\n              setInputData(newArr);\n              setActiveCity(newItem);\n            },\n            children: city.Present\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 662,\n            columnNumber: 21\n          }, this)) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"drawer__text\",\n          children: \"\\u0412\\u0456\\u0434\\u0434\\u0456\\u043B\\u0435\\u043D\\u043D\\u044F \\u041D\\u043E\\u0432\\u043E\\u0457 \\u041F\\u043E\\u0448\\u0442\\u0438:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 690,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: inputData.novaPoshtaBranch.value,\n          name: \"novaPoshtaBranch\",\n          onChange: onChangeInput,\n          className: \"drawer__input\",\n          type: \"text\",\n          placeholder: \"\",\n          style: {\n            borderColor: inputData.novaPoshtaBranch.isValid ? \"#444ad3\" : \"red\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 691,\n          columnNumber: 13\n        }, this), inputData.novaPoshtaBranch.errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"red\"\n          },\n          children: inputData.novaPoshtaBranch.errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 705,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: isShowDepartment ? \"showed showedActive\" : \"showed\",\n          children: novaDepartment.length > 0 ? novaDepartment.map(department => /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: e => {\n              let newItem = {\n                ...department,\n                isActive: true\n              };\n              let newArr = {\n                ...inputData,\n                novaPoshtaBranch: {\n                  ...department,\n                  isValid: true,\n                  value: `${department.CityDescription} ${department.Description}`\n                }\n              };\n              setShowDepartment(false);\n              setInputData(newArr);\n              setNovaDepartment(newItem);\n            },\n            children: department.Description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 21\n          }, this)) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"drawer__text\",\n          children: \"\\u041A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 736,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            borderColor: inputData.comment.isValid ? \"#444ad3\" : \"red\"\n          },\n          value: inputData.comment.value,\n          onChange: onChangeInput,\n          name: \"comment\",\n          className: \"drawer__input\",\n          type: \"text\",\n          placeholder: \"\\u0417\\u0430\\u043B\\u0438\\u0448\\u0442\\u0435 \\u043A\\u043E\\u043C\\u0435\\u043D\\u0434\\u0430\\u0440 \\u0434\\u043E \\u0441\\u0432\\u043E\\u0433\\u043E \\u0437\\u0430\\u043C\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 737,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"drawer__text\",\n          children: \"\\u042F\\u043A \\u0437 \\u0432\\u0430\\u043C\\u0438 \\u0437\\u0432\\u044F\\u0437\\u0430\\u0442\\u0438\\u0441\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"drawer__label\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"drawer__label-input\",\n            type: \"radio\",\n            name: \"connection\",\n            value: \"viber\",\n            onClick: e => setInputMessenger(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 751,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"drawer__label-title\",\n            children: \"Viber\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 758,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 750,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"drawer__label\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"drawer__label-input\",\n            type: \"radio\",\n            onClick: e => setInputMessenger(e.target.value),\n            value: \"telegram\",\n            name: \"connection\",\n            checked: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 761,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"drawer__label-title\",\n            children: \"Telegram\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 769,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 760,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"drawer__text\",\n          children: \"\\u0421\\u043F\\u043E\\u0441\\u0456\\u0431 \\u043E\\u043F\\u043B\\u0430\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 771,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"drawer__label\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            onClick: e => setInputPayment(e.target.value),\n            checked: true,\n            className: \"drawer__label-input\",\n            type: \"radio\",\n            value: \"monopay\",\n            name: \"pay\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 773,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"drawer__label-title\",\n            children: \"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u043E\\u043D\\u043B\\u0430\\u0439\\u043D \\u0437 monopay\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 781,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 772,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"drawer__label\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"drawer__label-input\",\n            onClick: e => setInputPayment(e.target.value),\n            type: \"radio\",\n            name: \"pay\",\n            value: \"novaposhta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 784,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"drawer__label-title\",\n            children: \"\\u041F\\u0440\\u0438 \\u043E\\u0442\\u0440\\u0438\\u043C\\u0430\\u043D\\u043D\\u0456 \\u043D\\u0430 \\u043F\\u043E\\u0448\\u0442\\u0456\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 791,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer__price\",\n          children: [\"\\u0421\\u0443\\u043C\\u0430 \", price, \" \\u20B4\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 793,\n          columnNumber: 13\n        }, this), !isValid ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer__error\",\n          children: \"\\u0411\\u0443\\u0434\\u044C \\u043B\\u0430\\u0441\\u043A\\u0430, \\u0437\\u0430\\u043F\\u043E\\u0432\\u043D\\u0456\\u0442\\u044C \\u0432\\u0441\\u0456 \\u043E\\u0431\\u043E\\u0432'\\u044F\\u0437\\u043A\\u043E\\u0432\\u0456 \\u043F\\u043E\\u043B\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 795,\n          columnNumber: 15\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"drawer__button\",\n          type: \"submit\",\n          onClick: e => onSubmitFunc(e),\n          children: \"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u0438 \\u0437\\u0430\\u043C\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 799,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"drawer__smallText\",\n          children: [\"\\u041D\\u0430\\u0442\\u0438\\u0441\\u043A\\u0430\\u044E\\u0447\\u0438 \\u043A\\u043D\\u043E\\u043F\\u043A\\u0443, \\u0432\\u0438 \\u043F\\u043E\\u0433\\u043E\\u0434\\u0436\\u0443\\u0454\\u0442\\u0435\\u0441\\u044C \\u0437\", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u041F\\u043E\\u043B\\u0456\\u0442\\u0438\\u043A\\u043E\\u044E \\u043A\\u043E\\u043D\\u0444\\u0456\\u0434\\u0435\\u043D\\u0446\\u0456\\u0439\\u043D\\u043E\\u0441\\u0442\\u0456\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 808,\n            columnNumber: 15\n          }, this), \" \\u0442\\u0430\", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0414\\u043E\\u0433\\u043E\\u0432\\u043E\\u0440\\u043E\\u043C \\u043F\\u0443\\u0431\\u043B\\u0456\\u0447\\u043D\\u043E\\u0457 \\u043E\\u0444\\u0435\\u0440\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 809,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 806,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"like__nothing\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"like__text\",\n          children: \"\\u0412\\u0438 \\u0449\\u0435 \\u043D\\u0456\\u0447\\u043E\\u0433\\u043E \\u043D\\u0435 \\u0437\\u0430\\u043C\\u043E\\u0432\\u0438\\u043B\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 814,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"\",\n          className: \"like__button\",\n          onClick: () => setOpenBasket && setOpenBasket(!isBasketOpen),\n          children: \"\\u0417\\u0410\\u041C\\u041E\\u0412\\u0418\\u0422\\u0418\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 815,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 813,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 542,\n    columnNumber: 5\n  }, this);\n};\n_s(Basket, \"nH97FIqlcvMvnVjWP79mLAQz9pA=\");\n_c = Basket;\nexport default Basket;\nvar _c;\n$RefreshReg$(_c, \"Basket\");","map":{"version":3,"names":["React","useEffect","useState","DrawerCart","Link","jsxDEV","_jsxDEV","Fragment","_Fragment","Basket","removeAdd","decrement","increment","isBasketOpen","onLike","setBoxsPriceBasket","setOpenBasket","price","carts","boxsPriceBasket","_s","basketBox","setBasketBox","inputMessenger","setInputMessenger","inputPayment","setInputPayment","isValid","setIsValid","listCityes","setListCityes","novaDepartment","setNovaDepartment","activeNovaDepartment","setActiveNovaDepartment","CityDescription","Description","activeCity","setActiveCity","Present","MainDescription","isShowCity","setShowCity","isShowDepartment","setShowDepartment","inputData","setInputData","fullName","value","errorMessage","phoneNumber","city","novaPoshtaBranch","comment","testApiNovaPoshta","url","key","response","fetch","method","body","JSON","stringify","apiKey","modelName","calledMethod","methodProperties","CityName","Limit","Page","data","success","json","newData","Addresses","map","citi","isActive","Department","console","log","Language","WarehouseId","onChangeInput","even","name","target","length","handleInputChange","prevData","formattedInput","trim","startsWith","process","env","PUBLIC_URL","then","catch","sendMessageToTelegram","TOKEN","CHAT_ID","URL_API","sendText","getCurrentDate","Date","toISOString","split","message","forEach","element","type","filter","count","formData","URLSearchParams","append","error","sendMessageToBackEnd","orderedCarts","filterCarts","index","activeType","quantity","picture","images","properties","activeBoxBasket","actBox","push","img","dataForBack","source_id","client_comment","buyer","full_name","phone","shipping","shipping_address_city","shipping_address_region","products","token","fetchData","headers","Accept","Pragma","Authorization","dataForCrm","ok","Error","status","responses","orderId","id","amount","grand_total","res","onSubmitFunc","e","preventDefault","areAllInputsValid","Object","values","every","field","newArr","fieldName","getDataFromMonoUser","dataLenght","dataAboutCartForMono","cart","qty","sum","icoun","unit","barcode","header","footer","tax","uktzed","discounts","mode","oldPrice","redirectUrl","webHookUrl","merchantPaymInfo","reference","destination","customerEmails","paymentType","basketOrder","window","location","href","pageUrl","closeMenu","event","clickedElement","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","Cart","smallButton","action","to","htmlFor","src","onChange","style","borderColor","placeholder","color","maxLength","newItem","department","checked","_c","$RefreshReg$"],"sources":["/Users/ivan/Desktop/Mistery/mistergiften/src/components/basket/index.tsx"],"sourcesContent":["import React, { useEffect, useState, ChangeEvent } from \"react\";\nimport DrawerCart from \"../drawerCart\";\nimport { Link } from \"react-router-dom\";\ninterface PropsType {\n  isLikeOpen?: boolean | undefined;\n  setOpenLike?: (status: boolean) => void;\n  isBasketOpen?: boolean | undefined;\n  setOpenBasket?: (status: boolean) => void;\n  updateCardLike?: any;\n  updateCardAdd?: any;\n  carts?: [];\n  onLike: any;\n  increment: any;\n  decrement: any;\n  setBoxsPriceBasket: any;\n  removeAdd: any;\n  price: number;\n  boxsPriceBasket: any;\n  setAddedCarts: any;\n}\n\ninterface array {\n  name: string;\n  price: number;\n  img: string;\n}\n\ninterface InputData {\n  fullName: {\n    value: string;\n    isValid: boolean;\n    errorMessage: string;\n  };\n  phoneNumber: {\n    value: string;\n    isValid: boolean;\n    errorMessage: string;\n  };\n  city: {\n    value: string;\n    isValid: boolean;\n    errorMessage: string;\n  };\n  novaPoshtaBranch: {\n    value: string;\n    isValid: boolean;\n    errorMessage: string;\n  };\n  comment: {\n    value: string;\n    isValid: boolean;\n    errorMessage: string;\n  };\n}\n\ninterface ActiveCity {\n  Present: string;\n  MainDescription: string;\n}\n\nconst Basket: React.FC<PropsType> = ({\n  removeAdd,\n  decrement,\n  increment,\n  isBasketOpen,\n  onLike,\n  setBoxsPriceBasket,\n  setOpenBasket,\n  price,\n  carts,\n  boxsPriceBasket,\n}) => {\n  const [basketBox, setBasketBox] = useState([]);\n  const [inputMessenger, setInputMessenger] = useState(\"viber\");\n  const [inputPayment, setInputPayment] = useState(\"monopay\");\n  const [isValid, setIsValid] = useState<boolean>(true);\n\n  const [listCityes, setListCityes] = useState([]);\n  const [novaDepartment, setNovaDepartment] = useState([]);\n  const [activeNovaDepartment, setActiveNovaDepartment] = useState({\n    CityDescription: \"\",\n    Description: \"\",\n  });\n  const [activeCity, setActiveCity] = useState<ActiveCity>({\n    Present: \"\",\n    MainDescription: \"\",\n  });\n  const [isShowCity, setShowCity] = useState(false);\n  const [isShowDepartment, setShowDepartment] = useState(true);\n  const [inputData, setInputData] = useState<InputData>({\n    fullName: {\n      value: \"\",\n      isValid: true,\n      errorMessage: \"\",\n    },\n    phoneNumber: {\n      value: \"\",\n      isValid: true,\n      errorMessage: \"\",\n    },\n    city: {\n      value: \"\",\n      isValid: true,\n      errorMessage: \"\",\n    },\n    novaPoshtaBranch: {\n      value: \"\",\n      isValid: true,\n      errorMessage: \"\",\n    },\n    comment: {\n      value: \"\",\n      isValid: true,\n      errorMessage: \"\",\n    },\n  });\n  const testApiNovaPoshta = async (value: string) => {\n    const url = \"https://api.novaposhta.ua/v2.0/json/\";\n    const key = \"fac23a4d2d34c603535680b0e25fac94\";\n    const response: any = await fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify({\n        apiKey: key,\n        modelName: \"Address\",\n        calledMethod: \"searchSettlements\",\n        methodProperties: {\n          CityName: value,\n          Limit: \"5\",\n          Page: \"1\",\n        },\n      }),\n    });\n    const { data, success } = await response.json();\n    if (success) {\n      const newData = data[0].Addresses.map((citi: any) => ({\n        ...citi,\n        isActive: false,\n      }));\n      setListCityes(newData);\n      setShowCity(true);\n      setActiveNovaDepartment({ CityDescription: \"\", Description: \"\" });\n    }\n  };\n  const Department = async (value: string) => {\n    console.log(activeCity.MainDescription);\n    const url = \"https://api.novaposhta.ua/v2.0/json/\";\n    const key = \"fac23a4d2d34c603535680b0e25fac94\";\n    const response: any = await fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify({\n        apiKey: key,\n        modelName: \"Address\",\n        calledMethod: \"getWarehouses\",\n        methodProperties: {\n          CityName: activeCity.MainDescription,\n          Page: \"1\",\n          Limit: \"5\",\n          Language: \"UA\",\n          WarehouseId: value,\n        },\n      }),\n    });\n    const { data, success } = await response.json();\n    if (success) {\n      const newData = data.map((Department: any) => ({\n        ...Department,\n        isActive: false,\n      }));\n      setNovaDepartment(newData);\n      setShowDepartment(true);\n    }\n  };\n  const onChangeInput = (\n    even: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    let { name, value } = even.target;\n    let isValid = true;\n    let errorMessage = \"\";\n    switch (name) {\n      case \"fullName\":\n        value.length > 5 ? (isValid = true) : (isValid = false);\n        errorMessage = isValid ? \"\" : \"Мінімальна довжина 5 букв\";\n        break;\n      case \"phoneNumber\":\n        value = handleInputChange(value);\n        value.length === 13 ? (isValid = true) : (isValid = false);\n        errorMessage = isValid ? \"\" : \"Ведіть правильно номер телефону\";\n        break;\n      case \"city\":\n        value.length > 2 ? (isValid = true) : (isValid = false);\n        testApiNovaPoshta(value);\n        errorMessage = isValid ? \"\" : \"Мінімальна довжина 3 букв\";\n        break;\n      case \"novaPoshtaBranch\":\n        Department(value);\n        value.length > 0 ? (isValid = true) : (isValid = false);\n        errorMessage = isValid ? \"\" : \"Виберіть номер віділення\";\n        break;\n      default:\n        break;\n    }\n    setInputData((prevData) => ({\n      ...prevData,\n      [name]: {\n        value,\n        isValid,\n        errorMessage,\n      },\n    }));\n  };\n\n  const handleInputChange = (value: string) => {\n    // Виконати перевірки для формату та довжини\n    let formattedInput = value.trim();\n\n    if (formattedInput.startsWith(\"0\")) {\n      formattedInput = `+38${formattedInput}`;\n    } else if (formattedInput.startsWith(\"380\")) {\n      formattedInput = `+${formattedInput}`;\n    } else if (formattedInput.startsWith(\"+\")) {\n      // Нічого не змінюємо\n    } else {\n      // Якщо введений текст не починається з 0, 380 або \"+\", ви можете застосувати ваші власні логіки обробки\n      // Наприклад, додаткові перевірки або ігнорування неприпустимих символів.\n    }\n    return formattedInput;\n  };\n\n  useEffect(() => {\n    fetch(`${process.env.PUBLIC_URL}/data/basket.json`)\n      .then((response) => response.json())\n      .then((data) => setBasketBox(data))\n      .catch(() => console.log(\"basket not find\"));\n  }, []);\n\n  const sendMessageToTelegram = async (data: any) => {\n    const TOKEN = \"6619280299:AAGIL6f6uD5nOU1Sjw26zzqvyI0V_fZZKq0\";\n    const CHAT_ID = \"-1002007095666\";\n    const URL_API = `https://api.telegram.org/bot${TOKEN}`;\n\n    const sendText = () => {\n      const getCurrentDate = new Date().toISOString().split(\"T\")[0];\n      //preparing text for post to telegram\n      let message = `<b>Заявка з сайта! </b>\n      `;\n\n      message += `\nДата створення замовлення: <i>${getCurrentDate}</i> \nІмя замовника <i>${inputData.fullName.value}</i>\nНомер телефону <i>${inputData.phoneNumber.value}</i>\nАдреса на яку відправити:\n<i>Місто ${inputData.city.value},\nНомер віділення ${inputData.novaPoshtaBranch.value}</i>\nКоментар <i>${inputData.comment.value}</i>\n\n<b>Замовлення</b>\nЗагальна сума : <i>${price} грн</i>\n\n<b>Карточки</b>`;\n      data.forEach((element: any) => {\n        message += `\n<b>${element.name} </b>:\n<b>Тип чашки </b> <i>${\n          element.type.length > 0\n            ? element.type.filter((element: any) => element.isActive)[0].name\n            : \"Без типа\"\n        }</i>\nЦіна за чашку:  <i>${element.price}</i> гривень\nКількість чашок: <b>${element.count}</b>\n`;\n      });\n      message += `\n<b>Додатковий бокс, ціна:</b> <i>\n${boxsPriceBasket > 0 ? boxsPriceBasket : \"Бокс не був вибраний\"}</i>\nСпосіб оплати ${inputPayment} \nСпосіб звязку ${inputMessenger}`;\n\n      //preparing sending data\n      const formData = new URLSearchParams();\n      formData.append(\"chat_id\", CHAT_ID);\n      formData.append(\"text\", message);\n      formData.append(\"parse_mode\", \"html\");\n\n      //sending data\n      fetch(`${URL_API}/sendMessage`, {\n        method: \"POST\",\n        body: formData,\n      })\n        .then((response) => {\n          return response;\n        })\n        .then((response) => response.json())\n        .then((data) => {\n          console.log(\"Message sent:\", data);\n        })\n        .catch((error) => {\n          console.error(\"Error:\", error);\n        });\n    };\n  };\n\n  const sendMessageToBackEnd = (orderedCarts: any) => {\n    const getCurrentDate = new Date().toISOString().split(\"T\")[0];\n\n    let filterCarts: any = [];\n    filterCarts = orderedCarts.map((element: any, index: any) => {\n      const activeType =\n        element.type.length > 0\n          ? element.type.filter((type: any) => type.isActive)\n          : [];\n\n      return {\n        price: element.price, // Замініть на значення з форми або іншого джерела\n        quantity: element.count,\n        name: element.name, // Замініть на значення з форми або іншого джерела\n        picture: element.images[0], // Замініть на значення з форми або іншого джерела\n        properties:\n          activeType.length > 0\n            ? [\n                {\n                  name: \"Тип чашки\",\n                  value: activeType[0].name,\n                },\n              ]\n            : null,\n      };\n    });\n    try {\n      const activeBoxBasket = () => {\n        return basketBox.filter((element: array) => {\n          return element.price === boxsPriceBasket;\n        });\n      };\n      const actBox: array = activeBoxBasket()[0];\n\n      filterCarts.push({\n        price: actBox.price, // Замініть на значення з форми або іншого джерела\n        quantity: 1,\n        name: actBox.name, // Замініть на значення з форми або іншого джерела\n        picture: actBox.img, // Замініть на значення з форми або іншого джерела\n        properties: [],\n      });\n    } catch {\n      console.log(\"basket is not choose\");\n    }\n\n    const dataForBack = {\n      source_id: 2,\n      client_comment: inputData.comment,\n      buyer: {\n        full_name: `${inputData.fullName.value}`, // Замініть на значення з форми або іншого джерела\n        // email: \"john.doe@example.com\", // Замініть на значення з форми або іншого джерела\n        phone: `${inputData.phoneNumber.value}`, // Замініть на значення з форми або іншого джерела\n      },\n      shipping: {\n        shipping_address_city: `${inputData.phoneNumber.value}`, // Замініть на значення з форми або іншого джерела\n        shipping_address_region: `${inputData.novaPoshtaBranch.value}`, // Замініть на значення з форми або іншого джерела\n      },\n      products: filterCarts,\n    };\n\n    // Ваш існуючий код для обробки даних та відправлення на сервер KeyCRM\n    const token = \"ZTg5MWY5NDE4YWRkYTBjZDIzODQ0Mjc4NzRmYmM2MWQxMGY0MmQzZg\";\n    const url = \"https://openapi.keycrm.app/v1/order\";\n\n    const fetchData = async () => {\n      try {\n        const response = await fetch(url, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n            \"Cache-Control\": \"no-cache\",\n            Pragma: \"no-cache\",\n            Authorization: `Bearer ${token}`,\n          },\n          body: JSON.stringify(dataForCrm),\n        });\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n\n        const responses = await response.json();\n        orderId = await responses.id;\n        amount = await responses.grand_total;\n        console.log(responses);\n        console.log(responses.grand_total);\n        res.json({ success: true });\n      } catch (error) {\n        console.error(\"Error:\", error.message);\n      }\n    };\n\n    fetchData();\n\n    // fetch(\"https://1f10-88-155-140-169.ngrok-free.app/send-to-keycrm\", {\n    //   method: \"POST\",\n    //   mode: \"cors\",\n    //   headers: {\n    //     \"Content-Type\": \"application/json\",\n    //     Accept: \"application/json\",\n    //     \"Cache-Control\": \"no-cache\",\n    //     Pragma: \"no-cache\",\n    //   },\n    //   body: JSON.stringify(dataForBack),\n    // })\n    //   .then((response) => {\n    //     if (!response.ok) {\n    //       throw new Error(`HTTP error! Status: ${response.status}`);\n    //     }\n    //     return response.json();\n    //   })\n    //   .then((data) => console.log(data))\n    //   .catch((error) => console.error(\"Error:\", error));\n  };\n\n  const onSubmitFunc = (e: any) => {\n    e.preventDefault();\n\n    const areAllInputsValid = Object.values(inputData).every(\n      (field) => field.value.length > 0 && field.isValid\n    );\n    const newArr: any = {};\n    for (const fieldName in inputData) {\n      const element = (inputData as any)[fieldName];\n      element.value.length == 0 && element.isValid\n        ? (element.isValid = false)\n        : (element.isValid = true);\n      (newArr as any)[fieldName] = element;\n    }\n    setInputData(newArr);\n    setIsValid(areAllInputsValid);\n\n    if (areAllInputsValid) {\n      if (inputPayment === \"monopay\") {\n        getDataFromMonoUser(carts);\n      }\n      sendMessageToTelegram(carts);\n      sendMessageToBackEnd(carts);\n      return;\n    } else {\n      return;\n    }\n  };\n\n  const dataLenght = carts?.length;\n\n  const getDataFromMonoUser = (orderedCarts: any) => {\n    const dataAboutCartForMono = orderedCarts.map(\n      (cart: any, index: number) => {\n        return {\n          name: cart.name,\n          qty: cart.count,\n          sum: cart.price * 100,\n          icoun: `${process.env.PUBLIC_URL}/img/${cart.images[0]}`,\n          unit: \"шт.\",\n          barcode: \"string\",\n          header: \"string\",\n          footer: \"string\",\n          tax: [],\n          uktzed: \"string\",\n          discounts: [\n            {\n              type: \"DISCOUNT\",\n              mode: \"VALUE\",\n              value: cart.oldPrice,\n            },\n          ],\n        };\n      }\n    );\n\n    try {\n      const activeBoxBasket = () => {\n        return basketBox.filter((element: array) => {\n          console.log(element.price, boxsPriceBasket);\n          return element.price === boxsPriceBasket;\n        });\n      };\n\n      const actBox: array = activeBoxBasket()[0];\n\n      dataAboutCartForMono.push({\n        name: actBox.name,\n        qty: 1,\n        sum: actBox.price * 100,\n        icoun: `${process.env.PUBLIC_URL}/img/${actBox.img}}`,\n        unit: \"шт.\",\n        barcode: \"string\",\n        header: \"string\",\n        footer: \"string\",\n        tax: [],\n        uktzed: \"string\",\n      });\n    } catch {\n      console.log(\"error\");\n    }\n    fetch(\"https://api.monobank.ua/api/merchant/invoice/create\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-Token\": \"utR_bnF6LUzdc4pr3yFNFF2kKEPk75xeIlItZx9QfaxY\",\n      },\n      body: JSON.stringify({\n        amount: price * 100,\n        redirectUrl: \"https://mister-gifter.com/\",\n        webHookUrl: \"https://1f10-88-155-140-169.ngrok-free.app/webhook\",\n        merchantPaymInfo: {\n          reference: \"84d0070ee4e44667b31371d8f8813947\",\n          destination: \"Подарунок від MISTER GIFTER\",\n          comment: \"Подарунок від MISTER GIFTER\",\n          customerEmails: [\n            \"ivan.kalunuch12@gmail.com\",\n            \"ivan.kalunuch31@gmail.com\",\n          ],\n          paymentType: \"debit\",\n          basketOrder: dataAboutCartForMono,\n        },\n      }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        console.log(data);\n        window.location.href = data.pageUrl;\n      })\n      .catch((response) => console.log(response));\n  };\n\n  const closeMenu = (event: React.MouseEvent<HTMLDivElement>): void => {\n    const clickedElement = event.target as HTMLDivElement;\n    if (clickedElement.className === \"drawer drawer--active\") {\n      setOpenBasket ? setOpenBasket(false) : console.log(\"not foutn function\");\n    } else {\n      console.log(\"No\");\n    }\n  };\n\n  return (\n    <section\n      className={isBasketOpen ? \"drawer drawer--active\" : \"drawer\"}\n      onClick={(e: any) => closeMenu(e)}\n    >\n      <form className=\"drawer__wrapper\">\n        <h2 className=\"drawer__title\">\n          Ваше замовлення:{\" \"}\n          <span\n            className=\"drawer__exit\"\n            onClick={() => setOpenBasket && setOpenBasket(!isBasketOpen)}\n          ></span>\n        </h2>\n        {dataLenght ? (\n          <>\n            <div className=\"drawer__carts-block\">\n              {carts.map((cart: any, index: number) => {\n                return (\n                  <div key={index}>\n                    <DrawerCart\n                      setOpenBasket={setOpenBasket}\n                      removeAdd={removeAdd}\n                      increment={increment}\n                      onLike={onLike}\n                      decrement={decrement}\n                      Cart={cart}\n                      smallButton={true}\n                      action=\"add\"\n                      key={index}\n                    />\n                  </div>\n                );\n              })}\n            </div>\n            <div className=\"drawer__price\">Сума {price} ₴ </div>\n            <Link\n              onClick={() => setOpenBasket && setOpenBasket(!isBasketOpen)}\n              to={\"/Boxs\"}\n            >\n              <div className=\"drawer__description\">\n                Додай бокс для вау ефекту! ✨⬇️\n              </div>\n            </Link>\n            <div className=\"drawer__row\">\n              {basketBox.map((element: any, index: any) => {\n                return (\n                  <div key={index}>\n                    <input\n                      key={index}\n                      id={`${element.name} ${index}`}\n                      className=\"drawer__box-checkbox\"\n                      type=\"radio\"\n                      name=\"RADIOBOXS\"\n                    />\n                    <label\n                      onClick={() => setBoxsPriceBasket(element.price)}\n                      key={index}\n                      htmlFor={`${element.name} ${index}`}\n                      className=\"drawer__box\"\n                    >\n                      <img\n                        src={`${process.env.PUBLIC_URL}/img/${element.img}`}\n                        className=\"drawer__box-img\"\n                      />\n                      <h5 className=\"drawer__box-title\">{element.name}</h5>\n                    </label>\n                  </div>\n                );\n              })}\n            </div>\n            <h4 className=\"drawer__text\">Прізвище та Імя:</h4>\n            <input\n              className=\"drawer__input\"\n              name=\"fullName\"\n              value={inputData.fullName.value}\n              onChange={onChangeInput}\n              style={{\n                borderColor: inputData.fullName.isValid ? \"#444ad3\" : \"red\",\n              }}\n              type=\"text\"\n              placeholder=\"Прізвище Імя По-батькові\"\n            />\n            {inputData.fullName.errorMessage && (\n              <p style={{ color: \"red\" }}>{inputData.fullName.errorMessage}</p>\n            )}\n            <h3 className=\"drawer__text\">Телефон:</h3>\n            <input\n              style={{\n                borderColor: inputData.phoneNumber.isValid ? \"#444ad3\" : \"red\",\n              }}\n              className=\"drawer__input\"\n              type=\"text\"\n              name=\"phoneNumber\"\n              value={inputData.phoneNumber.value}\n              maxLength={13}\n              onChange={onChangeInput}\n              placeholder=\"+38 (___) ___-__-__\"\n            />\n            {inputData.phoneNumber.errorMessage && (\n              <p style={{ color: \"red\" }}>\n                {inputData.phoneNumber.errorMessage}\n              </p>\n            )}\n            <h4 className=\"drawer__text\">Місто:</h4>\n            <input\n              name=\"city\"\n              className=\"drawer__input\"\n              type=\"text\"\n              value={inputData.city.value}\n              onChange={onChangeInput}\n              placeholder=\"м. Київ\"\n              style={{\n                borderColor: inputData.city.isValid ? \"#444ad3\" : \"red\",\n              }}\n            />\n            {inputData.city.errorMessage && (\n              <p style={{ color: \"red\" }}>{inputData.city.errorMessage}</p>\n            )}\n            <div className={isShowCity ? \"showed showedActive\" : \"showed\"}>\n              {listCityes.length > 0\n                ? listCityes.map((city: any, index: number) => (\n                    <div\n                      onClick={(e: any) => {\n                        let newItem = { ...city, isActive: true };\n                        let newArr = {\n                          ...inputData,\n                          city: {\n                            ...city,\n                            isValid: true,\n                            value: newItem.Present,\n                          },\n                          novaPoshtaBranch: {\n                            isValid: false,\n                            value: \"\",\n                            errorMessage: \"Ведіть номер віділення\",\n                          },\n                        };\n                        setShowCity(false);\n                        setInputData(newArr);\n                        setActiveCity(newItem);\n                      }}\n                      key={index}\n                    >\n                      {city.Present}\n                    </div>\n                  ))\n                : null}\n            </div>\n\n            <h4 className=\"drawer__text\">Відділення Нової Пошти:</h4>\n            <input\n              value={inputData.novaPoshtaBranch.value}\n              name=\"novaPoshtaBranch\"\n              onChange={onChangeInput}\n              className=\"drawer__input\"\n              type=\"text\"\n              placeholder=\"\"\n              style={{\n                borderColor: inputData.novaPoshtaBranch.isValid\n                  ? \"#444ad3\"\n                  : \"red\",\n              }}\n            />\n            {inputData.novaPoshtaBranch.errorMessage && (\n              <p style={{ color: \"red\" }}>\n                {inputData.novaPoshtaBranch.errorMessage}\n              </p>\n            )}\n            <div\n              className={isShowDepartment ? \"showed showedActive\" : \"showed\"}\n            >\n              {novaDepartment.length > 0\n                ? novaDepartment.map((department: any) => (\n                    <div\n                      onClick={(e) => {\n                        let newItem = { ...department, isActive: true };\n                        let newArr = {\n                          ...inputData,\n                          novaPoshtaBranch: {\n                            ...department,\n                            isValid: true,\n                            value: `${department.CityDescription} ${department.Description}`,\n                          },\n                        };\n                        setShowDepartment(false);\n                        setInputData(newArr);\n                        setNovaDepartment(newItem);\n                      }}\n                    >\n                      {department.Description}\n                    </div>\n                  ))\n                : null}\n            </div>\n\n            <h4 className=\"drawer__text\">Коментар:</h4>\n            <input\n              style={{\n                borderColor: inputData.comment.isValid ? \"#444ad3\" : \"red\",\n              }}\n              value={inputData.comment.value}\n              onChange={onChangeInput}\n              name=\"comment\"\n              className=\"drawer__input\"\n              type=\"text\"\n              placeholder=\"Залиште комендар до свого замовлення\"\n            />\n\n            <h4 className=\"drawer__text\">Як з вами звязатись</h4>\n            <label className=\"drawer__label\">\n              <input\n                className=\"drawer__label-input\"\n                type=\"radio\"\n                name=\"connection\"\n                value=\"viber\"\n                onClick={(e: any) => setInputMessenger(e.target.value)}\n              />\n              <h5 className=\"drawer__label-title\">Viber</h5>\n            </label>\n            <label className=\"drawer__label\">\n              <input\n                className=\"drawer__label-input\"\n                type=\"radio\"\n                onClick={(e: any) => setInputMessenger(e.target.value)}\n                value=\"telegram\"\n                name=\"connection\"\n                checked\n              />\n              <h5 className=\"drawer__label-title\">Telegram</h5>\n            </label>\n            <h4 className=\"drawer__text\">Спосіб оплати</h4>\n            <label className=\"drawer__label\">\n              <input\n                onClick={(e: any) => setInputPayment(e.target.value)}\n                checked\n                className=\"drawer__label-input\"\n                type=\"radio\"\n                value=\"monopay\"\n                name=\"pay\"\n              />\n              <h5 className=\"drawer__label-title\">Оплата онлайн з monopay</h5>\n            </label>\n            <label className=\"drawer__label\">\n              <input\n                className=\"drawer__label-input\"\n                onClick={(e: any) => setInputPayment(e.target.value)}\n                type=\"radio\"\n                name=\"pay\"\n                value=\"novaposhta\"\n              />\n              <h5 className=\"drawer__label-title\">При отриманні на пошті</h5>\n            </label>\n            <div className=\"drawer__price\">Сума {price} ₴</div>\n            {!isValid ? (\n              <div className=\"drawer__error\">\n                Будь ласка, заповніть всі обов'язкові поля\n              </div>\n            ) : null}\n            <button\n              className=\"drawer__button\"\n              type=\"submit\"\n              onClick={(e: any) => onSubmitFunc(e)}\n            >\n              Оформити замовлення\n            </button>\n            <p className=\"drawer__smallText\">\n              Натискаючи кнопку, ви погоджуєтесь з\n              <span>Політикою конфіденційності</span> та\n              <span>Договором публічної оферти</span>\n            </p>\n          </>\n        ) : (\n          <div className=\"like__nothing\">\n            <h2 className=\"like__text\">Ви ще нічого не замовили</h2>\n            <Link\n              to={\"\"}\n              className=\"like__button\"\n              onClick={() => setOpenBasket && setOpenBasket(!isBasketOpen)}\n            >\n              ЗАМОВИТИ\n            </Link>\n          </div>\n        )}\n      </form>\n    </section>\n  );\n};\n\nexport default Basket;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}